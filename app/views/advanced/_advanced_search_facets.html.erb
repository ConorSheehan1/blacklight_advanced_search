<% facet_field_names.each do |solr_fname| %>
<div class="facet_item">
  <% display_facet = @response.facets.detect {|f| f.name == solr_fname} -%>
  
  <% if display_facet && display_facet.items.length > 0 %>
    <h3><%= facet_field_labels[solr_fname] -%> <span class="adv_facet_selections" style="display:none;"></span></h3>
    
    <%- 
      # special handling for facets configured as range facets with range plugin
      # render_range_input helper supplied by date range plugin, if it's installed
    -%>
    <% if Blacklight.config[:facet][:range][solr_fname] && respond_to?(:render_range_input) %>
      <div class="range_limit">
       <%= render_range_input(solr_fname, :begin) %> - <%= render_range_input(solr_fname, :end) %>      
      </div>    
    <% else Blacklight.config[:facet][:range][solr_fname] %>    
      <ul>
        <% display_facet.items.each do |item| -%>
          <li>
            <%= check_box_tag "f_inclusive[#{solr_fname}][#{item.value.to_sym}]", 1, facet_value_checked?(solr_fname, item.value)%> <%= label_tag "f_inclusive_#{solr_fname}[#{item.value.to_sym}]", h(item.value) %> (<%= format_num item.hits %>)
          </li>
        <% end -%>
      </ul>
    <% end %>
  <% end %>
  
</div>
<% end %>
